# Map コンポーネント改造計画

## 要件
- 二点のポイント（start, end）を選択可能にする
- 選択した場所にマーカーを表示
- 最大2点まで選択可能
- 最小の実装にとどめる

## 実装ファイル
- `/home/yotu/github/2509-progate-aws/main/frontend/app/components/Map.tsx`

## 実装内容

### 1. 状態管理の追加
- `useState` を使用してマーカーの座標を管理
- `startPoint` と `endPoint` の2つの座標を保持

### 2. クリックイベントハンドラーの実装
- マップクリック時に座標を取得
- 最初のクリックで `startPoint` を設定
- 二回目のクリックで `endPoint` を設定
- 3回目以降のクリックは無効化

### 3. マーカーの表示
- `maplibregl.Marker` を使用してマーカーを作成
- 異なる色で start と end を区別
- 既存マーカーがある場合は削除してから新規作成

### 4. 必要な型定義
- 座標を表す型: `{ lng: number; lat: number }`
- マーカー参照用の ref

## 技術的詳細
- maplibregl の click イベントリスナーを使用
- マーカーの色分け: start（赤）、end（青）
- state の更新時にマーカーも同期更新
- コンポーネントのクリーンアップでマーカーも削除

## 最小実装の範囲
- マーカーの表示のみ
- ルート描画は含まない
- マーカーのドラッグ機能は含まない
- 座標の外部への公開は含まない