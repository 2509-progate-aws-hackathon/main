# 要件定義書

## 概要

ネガティブ道案内アプリは、オープンデータから収集した事故データを活用して、事故が少ないルートを提案するジョークアプリです。AWS Location Serviceを使用したマップ機能と、Next.jsベースのフロントエンドをAWS Amplifyにデプロイし、AppSyncを通じてデータベースにアクセスします。ハッカソン向けの短期開発を想定した設計となります。

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、マップインターフェースを表示したい。事故データを確認し、視覚的にルートを計画できるようにするため。

#### 受け入れ基準

1. ユーザーがアプリケーションを開いた時、システムはAWS Location Serviceを使用してインタラクティブなマップを表示する
2. マップが読み込まれた時、システムはマップ上に事故データポイントをオーバーレイ表示する
3. ユーザーがマップを操作した時、システムはスムーズなナビゲーションとズーム機能を提供する
4. 事故データが利用可能な場合、システムは重要度や頻度に基づいて異なる色で事故マーカーを表示する

### 要件 2

**ユーザーストーリー:** ユーザーとして、出発地と目的地を入力したい。事故が起こりやすいエリアを避けるルート提案を受けるため。

#### 受け入れ基準

1. ユーザーがマップをクリックした時、システムは出発地と目的地の設定を可能にする
2. 両方のポイントが設定された時、システムは複数のルートオプションを計算する
3. ルートが計算された時、システムは過去の事故が少ないルートを優先する
4. 安全なルートが存在しない場合、システムは適切な警告と共に「最も危険の少ない」オプションを表示する

### 要件 3

**ユーザーストーリー:** システム管理者として、事故データをデータベースに蓄積したい。アプリケーションがそのデータを参照してルート計算できるようにするため。

#### 受け入れ基準

1. システムが開始された時、AppSync経由でデータベースから事故データを取得する
2. 事故データがデータベースに存在する時、システムはそのデータを読み込んで使用する
3. データが取得された時、システムは事故の概要、説明、場所、日付を処理する
4. データ取得が失敗した場合、システムはエラーをログに記録し、デフォルトデータまたは空の状態で継続する

### 要件 4

**ユーザーストーリー:** ユーザーとして、ユーモアと個性のあるルート推奨を見たい。アプリが楽しいジョークアプリケーションとして感じられるようにするため。

#### 受け入れ基準

1. ルートが表示された時、システムはユーモラスな説明と警告を含める
2. 事故統計を表示する時、システムはコメディ的な解説でデータを提示する
3. 安全なルートが存在しない時、システムはユーモラスなトーンで誇張された警告を表示する
4. 最も安全なルートが大幅に長い場合、システムはトレードオフについてジョークを言う

### 要件 5

**ユーザーストーリー:** 開発者として、AWSインフラストラクチャにアプリケーションをデプロイしたい。ハッカソン中に簡単にデモンストレーションできるようにするため。

#### 受け入れ基準

1. アプリケーションがビルドされた時、AWS Amplifyデプロイメントと互換性がある
2. デプロイされた時、システムはすべてのデータベース操作にAppSyncを使用する
3. ロケーションサービスにアクセスする時、システムはAWS Location Serviceで適切に認証する
4. デプロイが失敗した場合、システムはデバッグのための明確なエラーメッセージを提供する

### 要件 6

**ユーザーストーリー:** ユーザーとして、モバイルデバイスでアプリケーションがレスポンシブに動作してほしい。必要に応じて実際のナビゲーションに使用できるようにするため。

#### 受け入れ基準

1. モバイルでアクセスされた時、システムはモバイル最適化されたインターフェースを表示する
2. タッチジェスチャーを使用する時、マップはピンチ、ズーム、パンに適切に応答する
3. モバイルでウェイポイントを設定する時、システムは十分に大きなタッチターゲットを提供する
4. GPSが利用可能な場合、システムは現在地を出発地として使用することを提案する